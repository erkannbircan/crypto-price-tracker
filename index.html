<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto Price Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --danger-color: #f72585;
            --success-color: #4cc9f0;
            --warning-color: #ffbe0b;
            --text-color: #2b2d42;
            --bg-color: #f8f9fa;
            --card-color: #ffffff;
            --border-color: #dee2e6;
        }
        
        /* ... (önceki CSS kodları aynı) ... */

        .positive-high {
            color: var(--success-color);
            font-weight: 500;
        }
        
        .positive-low {
            color: var(--warning-color);
            font-weight: 500;
        }
        
        .negative {
            color: var(--danger-color);
            font-weight: 500;
        }

        .legend {
            margin-top: 20px;
            padding: 12px;
            background-color: rgba(0,0,0,0.03);
            border-radius: 8px;
            font-size: 0.85rem;
            border-left: 4px solid var(--primary-color);
        }
        
        .legend-item {
            display: inline-flex;
            align-items: center;
            margin-right: 15px;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 6px;
        }
    </style>
</head>
<body>
    <!-- ... (önceki HTML kodu aynı) ... -->
    
    <div class="legend">
        <strong>Color Rules:</strong>
        <div class="legend-item"><span class="legend-color" style="background: var(--success-color);"></span> 1W: >+5% | 1M: >+10% | 1Y: >+20%</div>
        <div class="legend-item"><span class="legend-color" style="background: var(--warning-color);"></span> 1W: +0% to +5% | 1M: +0% to +10% | 1Y: +0% to +20%</div>
        <div class="legend-item"><span class="legend-color" style="background: var(--danger-color);"></span> Any negative value</div>
    </div>

    <script>
        // ... (önceki JS kodlarının başı aynı) ...

        // Fetch data for all coins
        async function fetchData() {
            refreshIcon.innerHTML = '<div class="loading"></div>';
            priceTable.innerHTML = '';
            
            const promises = pairs.map(pair => fetchCoinData(pair));
            const results = await Promise.all(promises);
            
            results.forEach(result => {
                const row = document.createElement("tr");
                row.setAttribute('data-coin', result.pair);
                
                // Renk kurallarını uygula
                const weeklyClass = result.weeklyPct < 0 ? 'negative' : 
                                 result.weeklyPct < 5 ? 'positive-low' : 'positive-high';
                
                const monthlyClass = result.monthlyPct < 0 ? 'negative' : 
                                   result.monthlyPct < 10 ? 'positive-low' : 'positive-high';
                
                const yearlyClass = result.yearlyPct < 0 ? 'negative' : 
                                  result.yearlyPct < 20 ? 'positive-low' : 'positive-high';
                
                if (result.error) {
                    row.innerHTML = `
                        <td class="drag-handle"><i class="fas fa-grip-lines"></i></td>
                        <td>${result.pair.replace("USDT", "/USDT")}</td>
                        <td colspan="4" style="color: var(--danger-color);">Error: ${result.error}</td>
                        <td><button class="action-btn remove-btn" data-coin="${result.pair}" title="Remove"><i class="fas fa-times"></i></button></td>
                    `;
                } else {
                    row.innerHTML = `
                        <td class="drag-handle"><i class="fas fa-grip-lines"></i></td>
                        <td>${result.pair.replace("USDT", "/USDT")}</td>
                        <td>${formatPrice(result.latestPrice)}</td>
                        <td class="${weeklyClass}">${result.weeklyPct}%</td>
                        <td class="${monthlyClass}">${result.monthlyPct}%</td>
                        <td class="${yearlyClass}">${result.yearlyPct}%</td>
                        <td><button class="action-btn remove-btn" data-coin="${result.pair}" title="Remove"><i class="fas fa-times"></i></button></td>
                    `;
                }
                
                priceTable.appendChild(row);
            });

            // ... (kalan JS kodu aynı) ...
        }

        // ... (kalan fonksiyonlar aynı) ...
    </script>
</body>
</html>
